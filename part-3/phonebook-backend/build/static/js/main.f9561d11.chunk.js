(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t(2),a=t(14),r=t.n(a),i=t(4),u=function(e){var n=e.filter,t=e.contacts,c=e.deleteContact;return Object(o.jsx)("div",{children:t.filter((function(e){var t;return null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(o.jsxs)("li",{children:[e.name,", ",e.phoneNumber,Object(o.jsx)("button",{value:e.id,onClick:function(n){return c(n,e.id)},children:"Delete"})]},e.id)}))})},l=function(e){var n=e.text,t=e.filter,c=e.onChanges;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("form",{children:[Object(o.jsx)("div",{children:n}),Object(o.jsx)("input",{value:t,onChange:c})]})})},s=function(e){var n=e.addContact,t=e.newName,c=e.newNumber,a=e.handleContactChange,r=e.handlePhoneChange;return Object(o.jsx)(o.Fragment,{children:Object(o.jsxs)("form",{onSubmit:n,children:[Object(o.jsxs)("div",{children:["Name:",Object(o.jsx)("input",{value:t,onChange:a})]}),Object(o.jsxs)("div",{children:["Phone number:",Object(o.jsx)("input",{value:c,onChange:r})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{type:"submit",children:"add"})})]})})},d=t(3),h=t.n(d),b="/api/persons",j=function(){return h.a.get(b)},f=function(e){return h.a.post(b,e)},m=function(e){return h.a.delete("".concat(b,"/").concat(e))},O=function(e,n){return h.a.put("".concat(b,"/").concat(e),n)},p=function(e){var n=Object(c.useState)([]),t=Object(i.a)(n,2),a=t[0],r=t[1],d=Object(c.useState)("a new name"),h=Object(i.a)(d,2),b=h[0],p=h[1],v=Object(c.useState)("a new phone number"),g=Object(i.a)(v,2),x=g[0],C=g[1],w=Object(c.useState)(""),N=Object(i.a)(w,2),S=N[0],k=N[1],E=function(){console.log("effect"),j().then((function(e){console.log("promise fulfilled",e.data),r(e.data)}))};Object(c.useEffect)(E,[]);var P=function(e){var n=!1,t=!1;return a.forEach((function(o){var c;(null===(c=o.name)||void 0===c?void 0:c.toLowerCase())===e.name.toLowerCase()&&(t=!0,y(o.id)&&(n=!0))})),console.log("UPDATE && EXISTS",n,t),!0===n||!0===t&&!1===n?1:0},y=function(e){return window.confirm("".concat(b," is already in the phonebook, replace old number with new one?"))?(O(e,{name:b,phoneNumber:x,id:e}).then((function(e){console.log("PUT promise fulfilled",e.data),E()})),1):0};return Object(o.jsxs)("div",{children:[Object(o.jsx)("h2",{children:"Filter"}),Object(o.jsx)(l,{text:"Search for contact: ",filter:S,onChanges:function(e){return k(e.target.value)}}),Object(o.jsx)("h2",{children:"Phonebook"}),Object(o.jsx)(s,{addContact:function(e){if(e.preventDefault(),console.log("button clicked",e.target),""===b)alert("The name must be at least one character long");else{var n={id:Math.floor(Math.random()),name:b,phoneNumber:x};P(n)||f(n).then((function(e){console.log("POST Promise fulfilled",e.data),r(a.concat(e.data))})),p(""),C("")}},newName:b,newNumber:x,handleContactChange:function(e){return p(e.target.value)},handlePhoneChange:function(e){return C(e.target.value)}}),Object(o.jsx)("h2",{children:"Numbers"}),Object(o.jsx)("ul",{children:Object(o.jsx)(u,{filter:S,contacts:a,deleteContact:function(e,n){e.preventDefault(),console.log("button clicked",e.target),window.confirm("Are you sure you want to delete the contact?")&&m(n).then((function(e){console.log("DELETE promise fulfilled",e.data),E()}))}})})]})};r.a.render(Object(o.jsx)(p,{contacts:[{id:1,name:"Gerhard Molin",phoneNumber:"+358 45 220 3414"},{id:2,name:"Eric Schmidt",phoneNumber:"+1 45 220 3414"},{id:3,name:"Lerry Page",phoneNumber:"+1 46 221 3414"},{id:4,name:"Steve Jobs",phoneNumber:"+1 42 100 3214"}]}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.f9561d11.chunk.js.map